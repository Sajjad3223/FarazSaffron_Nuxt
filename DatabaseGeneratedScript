--
-- Script was generated by Devart dbForge Studio for SQL Server, Version 6.5.140.0
-- Product home page: http://www.devart.com/dbforge/sql/studio
-- Script date 3/5/2024 12:58:33 PM
-- Server version: 16.00.1000
--



USE GPSaffron
GO

IF DB_NAME() <> N'GPSaffron' SET NOEXEC ON
GO

--
-- Create table [gp].[Users]
--
PRINT (N'Create table [gp].[Users]')
GO
CREATE TABLE gp.Users (
  Id bigint IDENTITY,
  FirstName nvarchar(200) NULL,
  LastName nvarchar(200) NULL,
  NationalId nvarchar(10) NULL,
  PhoneNumber nvarchar(11) NOT NULL,
  ConfirmCode nvarchar(10) NULL,
  Email nvarchar(100) NULL,
  Password nvarchar(max) NOT NULL,
  Avatar nvarchar(150) NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Users PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create index [IX_Users_PhoneNumber] on table [gp].[Users]
--
PRINT (N'Create index [IX_Users_PhoneNumber] on table [gp].[Users]')
GO
CREATE UNIQUE INDEX IX_Users_PhoneNumber
  ON gp.Users (PhoneNumber)
  ON [PRIMARY]
GO

--
-- Create table [gp].[Wallets]
--
PRINT (N'Create table [gp].[Wallets]')
GO
CREATE TABLE gp.Wallets (
  Id bigint IDENTITY,
  UserId bigint NOT NULL,
  Price int NOT NULL,
  Description nvarchar(max) NULL,
  IsFinally bit NOT NULL,
  FinallyDate datetime2 NULL,
  WalletType int NOT NULL,
  RefCode nvarchar(max) NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Wallets PRIMARY KEY CLUSTERED (UserId, Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create foreign key [FK_Wallets_Users_UserId] on table [gp].[Wallets]
--
PRINT (N'Create foreign key [FK_Wallets_Users_UserId] on table [gp].[Wallets]')
GO
ALTER TABLE gp.Wallets
  ADD CONSTRAINT FK_Wallets_Users_UserId FOREIGN KEY (UserId) REFERENCES gp.Users (Id) ON DELETE CASCADE
GO

--
-- Create table [gp].[UserRoles]
--
PRINT (N'Create table [gp].[UserRoles]')
GO
CREATE TABLE gp.UserRoles (
  Id bigint IDENTITY,
  UserId bigint NOT NULL,
  RoleId bigint NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_UserRoles PRIMARY KEY CLUSTERED (UserId, Id)
)
ON [PRIMARY]
GO

--
-- Create foreign key [FK_UserRoles_Users_UserId] on table [gp].[UserRoles]
--
PRINT (N'Create foreign key [FK_UserRoles_Users_UserId] on table [gp].[UserRoles]')
GO
ALTER TABLE gp.UserRoles
  ADD CONSTRAINT FK_UserRoles_Users_UserId FOREIGN KEY (UserId) REFERENCES gp.Users (Id) ON DELETE CASCADE
GO

--
-- Create table [gp].[Addresses]
--
PRINT (N'Create table [gp].[Addresses]')
GO
CREATE TABLE gp.Addresses (
  Id bigint IDENTITY,
  UserId bigint NOT NULL,
  ReceiverFirstName nvarchar(100) NOT NULL,
  ReceiverLastName nvarchar(100) NOT NULL,
  ReceiverPhoneNumber nvarchar(11) NOT NULL,
  State nvarchar(100) NOT NULL,
  City nvarchar(100) NOT NULL,
  Street nvarchar(300) NOT NULL,
  PostCode nvarchar(10) NOT NULL,
  Plaque int NOT NULL,
  Unit int NOT NULL,
  IsActiveAddress bit NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Addresses PRIMARY KEY CLUSTERED (UserId, Id)
)
ON [PRIMARY]
GO

--
-- Create foreign key [FK_Addresses_Users_UserId] on table [gp].[Addresses]
--
PRINT (N'Create foreign key [FK_Addresses_Users_UserId] on table [gp].[Addresses]')
GO
ALTER TABLE gp.Addresses
  ADD CONSTRAINT FK_Addresses_Users_UserId FOREIGN KEY (UserId) REFERENCES gp.Users (Id) ON DELETE CASCADE
GO

--
-- Create table [gp].[Tickets]
--
PRINT (N'Create table [gp].[Tickets]')
GO
CREATE TABLE gp.Tickets (
  Id bigint IDENTITY,
  Title nvarchar(100) NOT NULL,
  Sender_UserId bigint NOT NULL,
  Sender_FullName nvarchar(100) NOT NULL,
  Text nvarchar(max) NOT NULL,
  TicketStatus int NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Tickets PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create table [gp].[TicketMessages]
--
PRINT (N'Create table [gp].[TicketMessages]')
GO
CREATE TABLE gp.TicketMessages (
  Id bigint IDENTITY,
  TicketId bigint NOT NULL,
  Sender_UserId bigint NOT NULL,
  Sender_FullName nvarchar(100) NOT NULL,
  Message nvarchar(max) NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_TicketMessages PRIMARY KEY CLUSTERED (TicketId, Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create foreign key [FK_TicketMessages_Tickets_TicketId] on table [gp].[TicketMessages]
--
PRINT (N'Create foreign key [FK_TicketMessages_Tickets_TicketId] on table [gp].[TicketMessages]')
GO
ALTER TABLE gp.TicketMessages
  ADD CONSTRAINT FK_TicketMessages_Tickets_TicketId FOREIGN KEY (TicketId) REFERENCES gp.Tickets (Id) ON DELETE CASCADE
GO

--
-- Create table [gp].[Roles]
--
PRINT (N'Create table [gp].[Roles]')
GO
CREATE TABLE gp.Roles (
  Id bigint IDENTITY,
  Title nvarchar(100) NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Roles PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
GO

--
-- Create table [gp].[Permissions]
--
PRINT (N'Create table [gp].[Permissions]')
GO
CREATE TABLE gp.Permissions (
  Id bigint IDENTITY,
  RoleId bigint NOT NULL,
  Permission int NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Permissions PRIMARY KEY CLUSTERED (RoleId, Id)
)
ON [PRIMARY]
GO

--
-- Create index [IX_Permissions_RoleId] on table [gp].[Permissions]
--
PRINT (N'Create index [IX_Permissions_RoleId] on table [gp].[Permissions]')
GO
CREATE INDEX IX_Permissions_RoleId
  ON gp.Permissions (RoleId)
  ON [PRIMARY]
GO

--
-- Create foreign key [FK_Permissions_Roles_RoleId] on table [gp].[Permissions]
--
PRINT (N'Create foreign key [FK_Permissions_Roles_RoleId] on table [gp].[Permissions]')
GO
ALTER TABLE gp.Permissions
  ADD CONSTRAINT FK_Permissions_Roles_RoleId FOREIGN KEY (RoleId) REFERENCES gp.Roles (Id) ON DELETE CASCADE
GO

--
-- Create table [gp].[Products]
--
PRINT (N'Create table [gp].[Products]')
GO
CREATE TABLE gp.Products (
  Id bigint IDENTITY,
  Title nvarchar(200) NOT NULL,
  Slug nvarchar(200) NOT NULL,
  Price int NOT NULL,
  Discount int NULL,
  PackingType int NOT NULL,
  ImageSource nvarchar(200) NOT NULL,
  ImageAlt nvarchar(200) NULL,
  SerialNumber nvarchar(100) NULL,
  CategoryId bigint NOT NULL,
  SubCategoryId bigint NULL,
  ProductWidth int NOT NULL,
  ProductLength int NOT NULL,
  ProductHeight int NOT NULL,
  DigiKalaLink nvarchar(150) NULL,
  MetaTitle nvarchar(500) NULL,
  MetaDescription nvarchar(500) NULL,
  MetaKeyWords nvarchar(500) NULL,
  Canonical nvarchar(500) NULL,
  IndexPage bit NOT NULL,
  [Schema] nvarchar(max) NULL,
  Quantity int NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Products PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create index [IX_Products_Slug] on table [gp].[Products]
--
PRINT (N'Create index [IX_Products_Slug] on table [gp].[Products]')
GO
CREATE UNIQUE INDEX IX_Products_Slug
  ON gp.Products (Slug)
  ON [PRIMARY]
GO

--
-- Create table [gp].[ProductSpecifications]
--
PRINT (N'Create table [gp].[ProductSpecifications]')
GO
CREATE TABLE gp.ProductSpecifications (
  Id bigint IDENTITY,
  ProductId bigint NOT NULL,
  Title nvarchar(100) NOT NULL,
  Value nvarchar(500) NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_ProductSpecifications PRIMARY KEY CLUSTERED (ProductId, Id)
)
ON [PRIMARY]
GO

--
-- Create foreign key [FK_ProductSpecifications_Products_ProductId] on table [gp].[ProductSpecifications]
--
PRINT (N'Create foreign key [FK_ProductSpecifications_Products_ProductId] on table [gp].[ProductSpecifications]')
GO
ALTER TABLE gp.ProductSpecifications
  ADD CONSTRAINT FK_ProductSpecifications_Products_ProductId FOREIGN KEY (ProductId) REFERENCES gp.Products (Id) ON DELETE CASCADE
GO

--
-- Create table [gp].[ProductImages]
--
PRINT (N'Create table [gp].[ProductImages]')
GO
CREATE TABLE gp.ProductImages (
  Id bigint IDENTITY,
  ProductId bigint NOT NULL,
  ImageSource nvarchar(200) NOT NULL,
  ImageAlt nvarchar(200) NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_ProductImages PRIMARY KEY CLUSTERED (ProductId, Id)
)
ON [PRIMARY]
GO

--
-- Create foreign key [FK_ProductImages_Products_ProductId] on table [gp].[ProductImages]
--
PRINT (N'Create foreign key [FK_ProductImages_Products_ProductId] on table [gp].[ProductImages]')
GO
ALTER TABLE gp.ProductImages
  ADD CONSTRAINT FK_ProductImages_Products_ProductId FOREIGN KEY (ProductId) REFERENCES gp.Products (Id) ON DELETE CASCADE
GO

--
-- Create table [gp].[Posts]
--
PRINT (N'Create table [gp].[Posts]')
GO
CREATE TABLE gp.Posts (
  Id bigint IDENTITY,
  Title nvarchar(200) NOT NULL,
  Slug nvarchar(100) NOT NULL,
  ShortDescription nvarchar(100) NOT NULL,
  Content nvarchar(max) NOT NULL,
  Writer_UserId bigint NOT NULL,
  Writer_FullName nvarchar(100) NOT NULL,
  CategoryId bigint NOT NULL,
  SubCategoryId bigint NULL,
  ImageSource nvarchar(100) NOT NULL,
  ImageAlt nvarchar(100) NULL,
  MetaTitle nvarchar(500) NULL,
  MetaDescription nvarchar(500) NULL,
  MetaKeyWords nvarchar(500) NULL,
  Canonical nvarchar(500) NULL,
  IndexPage bit NOT NULL,
  [Schema] nvarchar(max) NULL,
  Tags nvarchar(max) NULL,
  PostStatus int NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Posts PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create table [gp].[Modification]
--
PRINT (N'Create table [gp].[Modification]')
GO
CREATE TABLE gp.Modification (
  Id bigint IDENTITY,
  ItemId bigint NOT NULL,
  ItemTitle nvarchar(max) NOT NULL,
  ModificationType int NOT NULL,
  OldValue nvarchar(max) NOT NULL,
  NewValue nvarchar(max) NOT NULL,
  ModificationDate datetime2 NOT NULL,
  PostId bigint NULL,
  CONSTRAINT PK_Modification PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create index [IX_Modification_PostId] on table [gp].[Modification]
--
PRINT (N'Create index [IX_Modification_PostId] on table [gp].[Modification]')
GO
CREATE INDEX IX_Modification_PostId
  ON gp.Modification (PostId)
  ON [PRIMARY]
GO

--
-- Create foreign key [FK_Modification_Posts_PostId] on table [gp].[Modification]
--
PRINT (N'Create foreign key [FK_Modification_Posts_PostId] on table [gp].[Modification]')
GO
ALTER TABLE gp.Modification
  ADD CONSTRAINT FK_Modification_Posts_PostId FOREIGN KEY (PostId) REFERENCES gp.Posts (Id)
GO

--
-- Create table [gp].[Orders]
--
PRINT (N'Create table [gp].[Orders]')
GO
CREATE TABLE gp.Orders (
  Id bigint IDENTITY,
  UserId bigint NOT NULL,
  FullName nvarchar(max) NOT NULL,
  TotalPrice int NOT NULL,
  DiscountCode nvarchar(10) NOT NULL,
  DiscountAmount int NOT NULL,
  FinallyPrice int NOT NULL,
  Score int NOT NULL,
  FinallyDate datetime2 NULL,
  IsFinally bit NOT NULL,
  ReferCode nvarchar(max) NULL,
  OrderStatus int NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Orders PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create table [gp].[OrderItems]
--
PRINT (N'Create table [gp].[OrderItems]')
GO
CREATE TABLE gp.OrderItems (
  Id bigint IDENTITY,
  OrderId bigint NOT NULL,
  ItemProductId bigint NOT NULL,
  ItemProductName nvarchar(max) NOT NULL,
  ItemProductSlug nvarchar(max) NOT NULL,
  ItemInfo_EItemType int NOT NULL,
  ItemProductImageSource nvarchar(max) NOT NULL,
  ItemProductImageAlt nvarchar(max) NULL,
  Price int NOT NULL,
  Count int NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_OrderItems PRIMARY KEY CLUSTERED (OrderId, Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create foreign key [FK_OrderItems_Orders_OrderId] on table [gp].[OrderItems]
--
PRINT (N'Create foreign key [FK_OrderItems_Orders_OrderId] on table [gp].[OrderItems]')
GO
ALTER TABLE gp.OrderItems
  ADD CONSTRAINT FK_OrderItems_Orders_OrderId FOREIGN KEY (OrderId) REFERENCES gp.Orders (Id) ON DELETE CASCADE
GO

--
-- Create table [gp].[Notifications]
--
PRINT (N'Create table [gp].[Notifications]')
GO
CREATE TABLE gp.Notifications (
  Id bigint IDENTITY,
  UserId bigint NULL,
  Title nvarchar(100) NOT NULL,
  Content nvarchar(max) NOT NULL,
  SubjectType int NOT NULL,
  IsSeen bit NOT NULL,
  AvailableTime time NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Notifications PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create table [gp].[NewsLetterReceivers]
--
PRINT (N'Create table [gp].[NewsLetterReceivers]')
GO
CREATE TABLE gp.NewsLetterReceivers (
  Id bigint IDENTITY,
  FullName nvarchar(max) NULL,
  Email nvarchar(max) NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_NewsLetterReceivers PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create table [gp].[DiscountCodes]
--
PRINT (N'Create table [gp].[DiscountCodes]')
GO
CREATE TABLE gp.DiscountCodes (
  Id bigint IDENTITY,
  Code nvarchar(10) NOT NULL,
  AmountInPercent int NOT NULL,
  AvailableTime time NOT NULL,
  AvailableQuantity int NOT NULL,
  UsedCount int NOT NULL,
  JustForUser bigint NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_DiscountCodes PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
GO

--
-- Create index [IX_DiscountCodes_Code] on table [gp].[DiscountCodes]
--
PRINT (N'Create index [IX_DiscountCodes_Code] on table [gp].[DiscountCodes]')
GO
CREATE INDEX IX_DiscountCodes_Code
  ON gp.DiscountCodes (Code)
  ON [PRIMARY]
GO

--
-- Create table [gp].[ContactMessages]
--
PRINT (N'Create table [gp].[ContactMessages]')
GO
CREATE TABLE gp.ContactMessages (
  Id bigint IDENTITY,
  FullName nvarchar(100) NOT NULL,
  PhoneNumber nvarchar(11) NOT NULL,
  Email nvarchar(100) NOT NULL,
  Text nvarchar(max) NOT NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_ContactMessages PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create table [gp].[Comments]
--
PRINT (N'Create table [gp].[Comments]')
GO
CREATE TABLE gp.Comments (
  Id bigint IDENTITY,
  ParentId bigint NULL,
  PostId bigint NOT NULL,
  PostType int NOT NULL,
  Sender_UserId bigint NOT NULL,
  Sender_FullName nvarchar(100) NOT NULL,
  Score int NOT NULL,
  Content nvarchar(max) NOT NULL,
  IsConsumer bit NOT NULL,
  CommentStatus int NOT NULL,
  CommentId bigint NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Comments PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create index [IX_Comments_CommentId] on table [gp].[Comments]
--
PRINT (N'Create index [IX_Comments_CommentId] on table [gp].[Comments]')
GO
CREATE INDEX IX_Comments_CommentId
  ON gp.Comments (CommentId)
  ON [PRIMARY]
GO

--
-- Create foreign key [FK_Comments_Comments_CommentId] on table [gp].[Comments]
--
PRINT (N'Create foreign key [FK_Comments_Comments_CommentId] on table [gp].[Comments]')
GO
ALTER TABLE gp.Comments
  ADD CONSTRAINT FK_Comments_Comments_CommentId FOREIGN KEY (CommentId) REFERENCES gp.Comments (Id)
GO

--
-- Create table [gp].[Categories]
--
PRINT (N'Create table [gp].[Categories]')
GO
CREATE TABLE gp.Categories (
  Id bigint IDENTITY,
  Title nvarchar(max) NOT NULL,
  ParentId bigint NULL,
  Slug nvarchar(max) NOT NULL,
  CategoryId bigint NULL,
  IsActive bit NOT NULL,
  CreationDate datetime2 NOT NULL,
  CONSTRAINT PK_Categories PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create index [IX_Categories_CategoryId] on table [gp].[Categories]
--
PRINT (N'Create index [IX_Categories_CategoryId] on table [gp].[Categories]')
GO
CREATE INDEX IX_Categories_CategoryId
  ON gp.Categories (CategoryId)
  ON [PRIMARY]
GO

--
-- Create foreign key [FK_Categories_Categories_CategoryId] on table [gp].[Categories]
--
PRINT (N'Create foreign key [FK_Categories_Categories_CategoryId] on table [gp].[Categories]')
GO
ALTER TABLE gp.Categories
  ADD CONSTRAINT FK_Categories_Categories_CategoryId FOREIGN KEY (CategoryId) REFERENCES gp.Categories (Id)
GO

--
-- Create table [dbo].[__EFMigrationsHistory]
--
PRINT (N'Create table [dbo].[__EFMigrationsHistory]')
GO
CREATE TABLE dbo.__EFMigrationsHistory (
  MigrationId nvarchar(150) NOT NULL,
  ProductVersion nvarchar(32) NOT NULL,
  CONSTRAINT PK___EFMigrationsHistory PRIMARY KEY CLUSTERED (MigrationId)
)
ON [PRIMARY]
GO
SET NOEXEC OFF
GO
